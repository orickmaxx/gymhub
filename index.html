<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GYMHUB: Planos de treino com checklist, estatísticas de desempenho e cronômetro de descanso. Seu diário de treino completo.">
    <meta name="keywords" content="treino, fitness, diário de treino, estatísticas de treino, checklist de exercícios, PWA fitness">
    <meta property="og:title" content="GYMHUB - Seu Diário de Treino Completo">
    <meta property="og:description" content="Marque seus treinos como concluídos, acompanhe suas estatísticas e use o cronômetro de descanso integrado.">
    <meta property="og:image" content="./imagens/logo.png">
    <meta property="og:url" content="https://orickmaxx.github.io/gymhub/">
    <title>GYMHUB - Diário de Treino e Estatísticas</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@700&family=Teko:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="manifest" href="./manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#F5A623">
    <style>
        :root {
            --bg-color: #000000;
            --bg-color-secondary: #1A1A1A;
            --text-color: #FFFFFF;
            --text-color-secondary: #999999;
            --primary-color: #F5A623;
            --border-color: #333333;
            --overlay-color: rgba(0, 0, 0, 0.9);
            --shadow-color: rgba(245, 166, 35, 0.4);
            --header-bg: rgba(0, 0, 0, 0.8);
            --success-color: #28a745;
        }

        [data-theme="light"] {
            --bg-color: #F0F2F5;
            --bg-color-secondary: #FFFFFF;
            --text-color: #1c1e21;
            --text-color-secondary: #606770;
            --primary-color: #F5A623;
            --border-color: #ced0d4;
            --overlay-color: rgba(255, 255, 255, 0.9);
            --shadow-color: rgba(0, 0, 0, 0.15);
             --header-bg: rgba(255, 255, 255, 0.8);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Teko', sans-serif;
        }
        body {
            color: var(--text-color);
            background: var(--bg-color);
            overflow-x: hidden;
            scroll-behavior: smooth;
            transition: background 0.3s ease, color 0.3s ease;
        }
        #background-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            object-fit: cover;
            z-index: -2;
            display: block;
        }
        body[data-theme="light"] #background-video {
            display: none;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--overlay-color);
            z-index: -1;
            transition: background 0.3s ease;
        }
        header {
            background: var(--header-bg);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            position: fixed;
            width: 100%;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
            transition: background 0.3s ease, border-color 0.3s ease;
        }
        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .logo-container img {
            width: 100px;
            transition: transform 0.3s ease;
        }
        .logo-container img:hover {
            transform: scale(1.1);
        }
        .logo-container span {
            font-size: 14px;
            color: var(--text-color-secondary);
            margin-top: 3px;
        }
        .logo-container span a {
            color: var(--text-color-secondary);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        .logo-container span a:hover {
            color: var(--primary-color);
        }
        .nav-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        nav {
            display: flex;
            align-items: center;
        }
        nav a {
            color: var(--text-color);
            text-decoration: none;
            margin-left: 10px;
            font-size: 20px;
            font-weight: 700;
            text-transform: uppercase;
            padding: 8px 12px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        nav a:hover, nav a.active {
            background: var(--primary-color);
            color: #000000;
        }
        .theme-switcher {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-color);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        .theme-switcher:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .hero-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        .hero-content img {
            width: 350px;
            height: auto;
        }
        .hero-content a {
            background: var(--primary-color);
            color: #000000;
            padding: 12px 24px;
            border-radius: 25px;
            text-decoration: none;
            font-size: 22px;
            font-weight: 700;
            text-transform: uppercase;
            box-shadow: 0 4px 10px var(--shadow-color);
            transition: all 0.3s ease;
        }
        .hero-content a:hover {
            background: var(--text-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px var(--shadow-color);
        }
        .plan-section, .stats-section {
            padding: 80px 20px;
            border-bottom: 1px solid var(--border-color);
            min-height: 100vh;
        }
        .plan-section h2, .stats-section h2 {
            font-size: 48px;
            font-weight: 700;
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        .plan-section .plan-description, .stats-section .plan-description {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 18px;
            color: var(--text-color-secondary);
            text-align: center;
            max-width: 800px;
            margin: 0 auto 40px auto;
            line-height: 1.6;
        }
        .treinos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            max-width: 1400px;
            margin: 0 auto;
            justify-content: center;
        }
        .treino-card {
            background: var(--bg-color-secondary);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            cursor: pointer;
            border: 1px solid var(--border-color);
        }
        .treino-card:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 8px 20px var(--shadow-color);
            border-color: var(--primary-color);
        }
        .treino-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 10px 10px 0 0;
            transition: transform 0.4s ease;
        }
        .treino-card:hover img {
            transform: scale(1.05);
        }
        .treino-card-content {
            padding: 20px;
        }
        .treino-card-content h3 {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 8px;
        }
        .treino-card-content p {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 16px;
            color: var(--text-color-secondary);
            line-height: 1.4;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        .modal.visible {
            display: flex;
        }
        .modal-content {
            background: var(--bg-color-secondary);
            padding: 25px;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            border: 1px solid var(--border-color);
        }
        .modal-header h3 {
            font-size: 32px;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
         .modal-header .plan-title {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 16px;
            color: var(--text-color-secondary);
            margin-bottom: 20px;
        }
        .modal-content ul {
            list-style: none;
        }
        .modal-content ul li {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 17px;
            color: var(--text-color);
            margin-bottom: 12px;
            line-height: 1.5;
            padding-left: 35px;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .modal-content ul li.completed-exercise span {
            text-decoration: line-through;
            color: var(--text-color-secondary);
        }
        .exercise-checkbox {
            position: absolute;
            left: 0;
            width: 22px;
            height: 22px;
            cursor: pointer;
        }
        .exercise-timer-icon {
            color: var(--text-color-secondary);
            cursor: pointer;
            transition: color 0.3s ease;
            font-size: 20px;
            margin-left: 15px;
        }
        .exercise-timer-icon:hover {
            color: var(--primary-color);
        }
        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 32px;
            cursor: pointer;
            color: var(--text-color-secondary);
            transition: color 0.3s ease, transform 0.3s ease;
        }
        .close-modal:hover {
            color: var(--primary-color);
            transform: rotate(90deg);
        }
        .modal-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            gap: 15px;
        }
        .finish-workout-btn {
            background: var(--success-color);
            color: #FFFFFF;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 700;
            text-transform: uppercase;
            transition: all 0.3s ease;
            flex-grow: 1;
        }
        .finish-workout-btn.completed {
             background: var(--border-color);
             color: var(--text-color-secondary);
             cursor: not-allowed;
        }
        .copy-btn {
            background: var(--primary-color);
            color: #000000;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 700;
            text-transform: uppercase;
            transition: all 0.3s ease;
            flex-grow: 1;
        }
        .copy-btn:hover {
            background: var(--text-color);
        }
        /* --- ESTILOS DO CRONÔMETRO --- */
        .timer-panel {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 1px dashed var(--border-color);
            border-radius: 10px;
        }
        .timer-presets {
            display: flex;
            gap: 10px;
        }
        .timer-presets button {
            background: var(--bg-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            padding: 8px 16px;
            border-radius: 20px;
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .timer-presets button:hover {
            background: var(--primary-color);
            color: #000;
            border-color: var(--primary-color);
        }
        .timer-display-container {
            position: relative;
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .timer-display-container svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }
        .timer-display-container .progress-ring-bg {
            stroke: var(--border-color);
            fill: none;
            stroke-width: 8;
        }
        .timer-display-container .progress-ring-fg {
            stroke: var(--primary-color);
            fill: none;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dashoffset 1s linear;
        }
        #timer-display {
            font-size: 40px;
            font-weight: 700;
            color: var(--text-color);
        }
        .timer-controls button {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 24px;
            margin: 0 10px;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        .timer-controls button:hover {
            color: var(--primary-color);
        }
        /* --- ESTILOS DAS ESTATÍSTICAS --- */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .stat-card {
            background: var(--bg-color-secondary);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }
        .stat-card h3 {
            font-size: 24px;
            color: var(--primary-color);
            margin-bottom: 15px;
            text-transform: uppercase;
        }
        .stat-card p {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 36px;
            font-weight: 700;
            color: var(--text-color);
        }
        .stat-card .subtext {
            font-size: 16px;
            color: var(--text-color-secondary);
        }
        #activity-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            text-align: center;
        }
        #activity-calendar div {
            padding: 10px 5px;
            font-family: 'Roboto Condensed', sans-serif;
            border-radius: 5px;
        }
        #activity-calendar .day-name {
            font-weight: 700;
            font-size: 14px;
            color: var(--text-color-secondary);
        }
        #activity-calendar .day-completed {
            background-color: var(--primary-color);
            color: #000;
            font-weight: 700;
        }
        #activity-calendar .day-today {
            border: 2px solid var(--primary-color);
        }
        .calculadora-tmb {
            padding: 80px 20px;
            text-align: center;
        }
        .calculadora-tmb h2 {
            font-size: 48px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-transform: uppercase;
        }
        .calculadora-tmb p {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 18px;
            color: var(--text-color-secondary);
            margin-bottom: 30px;
        }
        .tmb-form {
            background: var(--bg-color-secondary);
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            margin: 0 auto;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
        }
        .tmb-form label {
            display: block;
            font-size: 16px;
            color: var(--text-color);
            margin-bottom: 5px;
            text-align: left;
            font-family: 'Roboto Condensed', sans-serif;
        }
        .tmb-form input,
        .tmb-form select {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            background: #333333; /* Mantido escuro para contraste */
            border: 1px solid #555;
            border-radius: 5px;
            color: #FFFFFF;
            font-size: 16px;
            font-family: 'Roboto Condensed', sans-serif;
        }
        .tmb-form input:focus,
        .tmb-form select:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        .tmb-form button {
            background: var(--primary-color);
            color: #000000;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 20px;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .tmb-form button:hover {
            background: var(--text-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px var(--shadow-color);
        }
        .tmb-result {
            margin-top: 30px;
            background: var(--bg-color-secondary);
            padding: 20px;
            border-radius: 10px;
            max-width: 500px;
            margin: 30px auto 0;
            text-align: left;
            border: 1px solid var(--border-color);
        }
        .tmb-result h3 {
            font-size: 24px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        .tmb-result p {
            font-size: 18px;
            color: var(--text-color);
            margin-bottom: 10px;
            font-family: 'Roboto Condensed', sans-serif;
        }
        .tmb-result p span {
            color: var(--primary-color);
            font-weight: 700;
        }
        footer {
            background: var(--bg-color);
            padding: 15px;
            text-align: center;
            font-size: 14px;
            color: var(--text-color-secondary);
            border-top: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        #install-prompt {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-color);
            color: #000000;
            padding: 10px 20px;
            border-radius: 25px;
            display: none;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 10px var(--shadow-color);
            z-index: 1000;
            font-size: 16px;
            font-weight: 700;
            text-transform: uppercase;
        }
        #install-prompt button {
            background: #FFFFFF;
            color: #000000;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            transition: all 0.3s ease;
        }
        .instagram-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            width: 50px;
            height: 50px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px var(--shadow-color);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .instagram-button i {
            color: #000000;
            font-size: 24px;
        }
        .instagram-button:hover {
            background: var(--text-color);
            transform: scale(1.1);
        }
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                padding: 10px;
            }
            .logo-container {
                margin-bottom: 10px;
            }
            .nav-controls {
                width: 100%;
                justify-content: space-between;
            }
            nav {
                justify-content: center;
                flex-wrap: wrap;
            }
            nav a {
                font-size: 14px;
                margin: 0 3px;
                padding: 6px 8px;
            }
            .plan-section h2, .calculadora-tmb h2, .stats-section h2 {
                font-size: 36px;
            }
            .hero-content img {
                width: 250px;
            }
        }
    </style>
</head>
<body data-theme="dark">
    <video id="background-video" autoplay loop muted playsinline preload="auto">
        <source src="./videos/fundo2.mp4" type="video/mp4">
        Seu navegador não suporta a tag de vídeo.
    </video>

    <header>
        <div class="logo-container">
            <img src="./imagens/logo.png" alt="GYMHUB Logo" loading="lazy">
            <span>By <a href="https://www.instagram.com/orickmax" target="_blank">@orickmax</a></span>
        </div>
        <div class="nav-controls">
            <nav>
                <a href="#home">Home</a>
                <a href="#low-volume">Baixo Volume</a>
                <a href="#high-intensity">Alta Intensidade</a>
                <a href="#estatisticas" onclick="renderStatistics()">Estatísticas</a>
                <a href="#calculadora-tmb">TMB</a>
            </nav>
            <button class="theme-switcher" id="theme-switcher" aria-label="Mudar tema">
                <i class="fas fa-sun"></i>
            </button>
        </div>
    </header>

    <main>
        <section class="hero" id="home">
            <div class="hero-content">
                <img src="./imagens/logo.png" alt="GYMHUB Logo" loading="lazy">
                <a href="#planos">Ver Planos de Treino</a>
            </div>
        </section>

        <section id="planos">
            <div class="plan-section" id="low-volume">
                <h2>Plano de Baixo Volume</h2>
                <p class="plan-description">Foco em eficiência máxima para hipertrofia com menos exercícios, mas com intensidade total e progressão de carga constante. Ideal para quem busca resultados sólidos com otimização do tempo na academia.</p>
                <div class="treinos-grid" id="low-volume-grid"></div>
            </div>

            <div class="plan-section" id="high-intensity">
                <h2>Plano de Alta Intensidade</h2>
                <p class="plan-description">Inspirado na filosofia de Arnold Schwarzenegger, este plano de alto volume e alta intensidade utiliza técnicas avançadas como Supersets e Drop Sets para levar seus músculos a um novo nível de estímulo. Recomendado para praticantes avançados.</p>
                <div class="treinos-grid" id="high-intensity-grid"></div>
            </div>
        </section>

        <section class="stats-section" id="estatisticas">
            <h2>Suas Estatísticas</h2>
            <p class="plan-description">Acompanhe seu progresso, consistência e desempenho. Cada treino finalizado conta!</p>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Treinos Finalizados</h3>
                    <p id="total-workouts-stat">0</p>
                    <span class="subtext">Total de sessões completas</span>
                </div>
                <div class="stat-card">
                    <h3>Sequência Atual</h3>
                    <p id="streak-stat">0 🔥</p>
                    <span class="subtext">Dias consecutivos de treino</span>
                </div>
                <div class="stat-card">
                    <h3>Frequência de Treinos</h3>
                    <canvas id="workout-frequency-chart"></canvas>
                </div>
                <div class="stat-card">
                    <h3>Calendário de Atividades</h3>
                    <div id="calendar-header"></div>
                    <div id="activity-calendar"></div>
                </div>
            </div>
        </section>

        <section class="calculadora-tmb" id="calculadora-tmb">
            <h2>Calculadora TMB</h2>
            <p>Descubra o total de calorias gastas para manter as funções vitais e determine sua necessidade diária de calorias (NDC).</p>
            <div class="tmb-form">
                <label for="peso">Peso (em quilos):</label>
                <input type="number" id="peso" placeholder="Ex: 70" required>
                <label for="altura">Altura (em centímetros):</label>
                <input type="number" id="altura" placeholder="Ex: 170" required>
                <label for="idade">Idade:</label>
                <input type="number" id="idade" placeholder="Ex: 30" required>
                <label for="sexo">Sexo:</label>
                <select id="sexo" required>
                    <option value="" disabled selected>Selecione</option>
                    <option value="masculino">Masculino</option>
                    <option value="feminino">Feminino</option>
                </select>
                <label for="atividade">Nível de Atividade Física:</label>
                <select id="atividade" required>
                    <option value="" disabled selected>Selecione</option>
                    <option value="sedentario">Sedentário (pouco ou nenhum exercício)</option>
                    <option value="moderado">Levemente Ativo (1-3 dias/semana)</option>
                    <option value="intenso">Moderadamente Ativo (3-5 dias/semana)</option>
                    <option value="muito_intenso">Muito Ativo (6-7 dias/semana)</option>
                </select>
                <button onclick="calcularTMB()">Calcular</button>
            </div>
            <div class="tmb-result" id="tmb-result" style="display: none;">
                <h3>Resultado</h3>
                <p>Taxa de Metabolismo Basal (TMB): <span id="tmb-value"></span> calorias</p>
                <p>Sua Necessidade Diária de Calorias (NDC) é: <span id="ndc-value"></span> calorias</p>
            </div>
        </section>
    </main>
    
    <div class="modal" id="modal" role="dialog" aria-hidden="true">
        <div class="modal-content" tabindex="-1">
            <span class="close-modal" onclick="closeModal()" aria-label="Fechar modal">×</span>
            <div class="modal-header">
                <h3 id="modal-title"></h3>
                <p class="plan-title" id="plan-title"></p>
            </div>
            <ul id="modal-exercicios"></ul>
            
            <div class="timer-panel" id="timer-panel">
                <div class="timer-presets">
                    <button onclick="setTimer(60)">60s</button>
                    <button onclick="setTimer(90)">90s</button>
                    <button onclick="setTimer(120)">120s</button>
                </div>
                <div class="timer-display-container">
                    <svg>
                        <circle class="progress-ring-bg" cx="60" cy="60" r="54"></circle>
                        <circle class="progress-ring-fg" id="progress-ring" cx="60" cy="60" r="54"></circle>
                    </svg>
                    <span id="timer-display">0:00</span>
                </div>
                <div class="timer-controls">
                    <button id="timer-start-pause" onclick="toggleTimer()"><i class="fas fa-play"></i></button>
                    <button id="timer-reset" onclick="resetTimer()"><i class="fas fa-undo"></i></button>
                </div>
            </div>

            <div class="modal-footer">
                <button class="finish-workout-btn" id="finish-workout-btn" onclick="finishWorkout()">Finalizar Treino</button>
                <button class="copy-btn" onclick="copyTreino()">Copiar Texto</button>
            </div>
        </div>
    </div>

    <a href="https://www.instagram.com/gymhub.allday/" target="_blank" class="instagram-button" aria-label="Siga-nos no Instagram">
        <i class="fab fa-instagram"></i>
    </a>

    <footer>
        <p>© 2025 GYMHUB - ALL DAY. Todos os direitos reservados.</p>
    </footer>

    <div id="install-prompt">
        Instale o GYMHUB para acesso rápido!
        <button onclick="promptInstall()">Instalar</button>
    </div>

    <script>
        // --- ESTRUTURA DE DADOS DOS TREINOS ---
        const planosDeTreino = {
            'low-volume': {
                titulo: 'Plano de Baixo Volume (Foco em Eficiência)',
                treinos: {
                    'Dia 1: Empurrar': {
                        descricao: 'Foco em massa e força para peito, ombros e tríceps com máxima eficiência.',
                        exercicios: [
                            'Supino Reto com Barra: 4 séries de 6-10 reps',
                            'Desenvolvimento Militar com Halteres (sentado): 4 séries de 6-10 reps',
                            'Supino Inclinado com Barra: 3 séries de 8-12 reps',
                            'Elevação Lateral com Halteres: 3 séries de 10-15 reps (execução controlada)',
                            'Mergulho nas Barras Paralelas (Dips): 3 séries até a falha'
                        ]
                    },
                    'Dia 2: Puxar e Antebraço': {
                        descricao: 'Construção de largura e espessura nas costas, finalizando com bíceps e antebraço.',
                        exercicios: [
                            'Levantamento Terra (Stiff ou Convencional): 4 séries de 5-8 reps',
                            'Barra Fixa (pegada aberta): 3 séries até a falha',
                            'Remada Curvada com Barra: 4 séries de 6-10 reps',
                            'Rosca Direta com Barra: 3 séries de 8-12 reps',
                            'Rosca de Punho com Barra: 3 séries de 15-20 reps',
                            'Rosca de Punho Invertida: 3 séries de 15-20 reps'
                        ]
                    },
                    'Dia 3: Pernas e Panturrilhas': {
                        descricao: 'Treino brutal com foco em quadríceps e estímulo anabólico geral.',
                        exercicios: [
                            'Agachamento Livre com Barra: 4 séries de 6-10 reps',
                            'Leg Press: 4 séries de 8-12 reps',
                            'Passada à Frente (Afundo) com Halteres: 3 séries de 10-12 reps por perna',
                            'Cadeira Extensora: 3 séries de 12-15 reps (com contração de pico)',
                            'Panturrilhas em Pé: 5 séries de 15-20 reps'
                        ]
                    },
                    'Dia 4: Recuperação Ativa e Abdômen': {
                        descricao: 'Acelerar a recuperação, queimar calorias e fortalecer o core.',
                        exercicios: [
                            'Cardio Leve (Caminhada inclinada ou bicicleta): 30-45 minutos',
                            '--- Circuito de Abdômen (3-4 voltas) ---',
                            'Elevação de Pernas Suspenso: 15-20 reps',
                            'Abdominal no Cabo (Ajoelhado): 15-20 reps',
                            'Prancha: Segurar até a falha'
                        ]
                    },
                     'Dia 5: Empurrar (Variação)': {
                        descricao: 'Chocar os músculos com diferentes ângulos e foco em força.',
                        exercicios: [
                            'Supino Inclinado com Halteres: 4 séries de 6-10 reps',
                            'Desenvolvimento com Barra (sentado): 4 séries de 6-10 reps',
                            'Cross Over na Polia Alta: 3 séries de 10-15 reps',
                            'Elevação Frontal com Barra: 3 séries de 10-12 reps',
                            'Tríceps Testa com Barra W: 4 séries de 8-12 reps (com Drop Set na última série)'
                        ]
                    },
                     'Dia 6: Puxar e Posterior': {
                        descricao: 'Foco em densidade muscular e na cadeia posterior (costas e isquiotibiais).',
                        exercicios: [
                            'Puxada Frontal com Pegada Aberta: 4 séries de 8-12 reps',
                            'Remada na Barra T: 4 séries de 8-12 reps',
                            'Mesa Flexora: 4 séries de 10-15 reps',
                            'Levantamento Terra Romeno (Stiff): 4 séries de 8-12 reps',
                            'Rosca Scott com Barra W: 3 séries de 8-12 reps'
                        ]
                    }
                }
            },
            'high-intensity': {
                titulo: 'Plano de Alta Intensidade (Estilo Arnold)',
                treinos: {
                    'Treino A - Peito e Ombro': {
                        descricao: 'Foco em peito com técnicas old school para hipertrofia.',
                        exercicios: [
                            '--- SUPER-SET 1 ---',
                            'A1: Supino Reto com Barra: 4 séries de 6-10 reps',
                            'A2: Supino Inclinado com Halteres: 4 séries de 8-12 reps (sem descanso após A1)',
                            '--- SUPER-SET 2 ---',
                            'B1: Cross Over na Polia Alta: 3 séries de 10-15 reps',
                            'B2: Fly na Máquina (Peck Deck): 3 séries de 10-15 reps (sem descanso após B1)',
                            '--- OMBROS ---',
                            'Desenvolvimento Militar com Barra (sentado): 4 séries de 6-10 reps',
                            'Elevação Lateral (com Drop Set): 3 séries de 8-10 reps + reps até a falha com peso menor'
                        ]
                    },
                    'Treino B - Costas': {
                        descricao: 'Treino de costas old school para largura e densidade.',
                        exercicios: [
                            'Remada Curvada com Barra (Estilo Pendlay): 4 séries de 6-10 reps',
                            '--- SUPER-SET ---',
                            'A1: Pulley Frente (Puxada Aberta): 4 séries de 8-12 reps',
                            'A2: Puxada com Triângulo: 4 séries de 10-15 reps (sem descanso após A1)',
                            '--- ISOLAMENTO ---',
                            'Remada Unilateral com Halter (Serrote): 3 séries de 8-12 reps (com Contração de Pico)',
                            '--- FINALIZADOR ---',
                            'Pullover com Halter: 3 séries de 12-15 reps (foco no alongamento)'
                        ]
                    },
                    'Treino C - Bíceps e Tríceps': {
                        descricao: 'Supersets agonista-antagonista para o máximo "pump" nos braços.',
                        exercicios: [
                            '--- SUPER-SET 1 ---',
                            'A1: Rosca Scott com Barra: 4 séries de 8-12 reps',
                            'A2: Tríceps Testa com Barra W: 4 séries de 8-12 reps',
                            '--- SUPER-SET 2 ---',
                            'B1: Rosca Alternada com Halteres: 3 séries de 10-12 reps',
                            'B2: Tríceps Francês Unilateral: 3 séries de 10-12 reps',
                            '--- SUPER-SET 3 (FINALIZADOR) ---',
                            'C1: Rosca Concentrada: 3 séries de 12-15 reps',
                            'C2: Tríceps na Polia com Corda: 3 séries de 12-15 reps'
                        ]
                    },
                    'Treino D - LEG DAY💀': {
                        descricao: 'Intensidade máxima com pré-exaustão para destruir as pernas.',
                         exercicios: [
                            '--- PRÉ-EXAUSTÃO ---',
                            'Cadeira Extensora: 3 séries de 15-20 reps (com pouco descanso)',
                            '--- EXERCÍCIO PRINCIPAL ---',
                            'Agachamento no Smith ou Leg Press: 5 séries de 8-15 reps',
                            '--- SUPER-SET POSTERIOR ---',
                            'A1: Cadeira Flexora: 4 séries de 10-15 reps',
                            'A2: Stiff com Halteres: 4 séries de 12-15 reps',
                            '--- FINALIZADOR ---',
                            'Passada (Afundo) com Halteres: 3 séries de 20 passos totais'
                        ]
                    }
                }
            }
        };

        // --- VARIÁVEIS GLOBAIS ---
        let currentPlanId = null;
        let currentTreinoNome = null;
        let workoutFrequencyChart = null;

        // --- FUNÇÕES DO SITE ---
        document.addEventListener('DOMContentLoaded', () => {
            gerarCardsDeTreino('low-volume', document.getElementById('low-volume-grid'));
            gerarCardsDeTreino('high-intensity', document.getElementById('high-intensity-grid'));
            initTheme();
            initGsapAnims();
            initTimer();
        });

        function gerarCardsDeTreino(planoId, gridElement) {
            const plano = planosDeTreino[planoId];
            if (!plano || !gridElement) return;
            const treinosDoPlano = plano.treinos;
            gridElement.innerHTML = '';
            for (const treinoNome in treinosDoPlano) {
                const treino = treinosDoPlano[treinoNome];
                let img_src = './imagens/A.png';
                if (treinoNome.toLowerCase().includes('costas') || treinoNome.toLowerCase().includes('puxar')) img_src = './imagens/B.png';
                if (treinoNome.toLowerCase().includes('bíceps') || treinoNome.toLowerCase().includes('braços')) img_src = './imagens/C.png';
                if (treinoNome.toLowerCase().includes('pernas') || treinoNome.toLowerCase().includes('leg')) img_src = './imagens/D.png';
                if (treinoNome.toLowerCase().includes('recuperação')) img_src = './imagens/logo.png';
                const cardHTML = `
                    <div class="treino-card" onclick="openModal('${planoId}', '${treinoNome}')">
                        <img src="${img_src}" alt="${treinoNome}" loading="lazy">
                        <div class="treino-card-content">
                            <h3>${treinoNome}</h3>
                            <p>${treino.descricao}</p>
                        </div>
                    </div>`;
                gridElement.innerHTML += cardHTML;
            }
        }

        function openModal(planoId, treinoNome) {
            currentPlanId = planoId;
            currentTreinoNome = treinoNome;

            const modal = document.getElementById('modal');
            const modalContent = modal.querySelector('.modal-content');
            const planTitleElement = document.getElementById('plan-title');
            const modalTitleElement = document.getElementById('modal-title');
            const modalExercicios = document.getElementById('modal-exercicios');

            const plano = planosDeTreino[planoId];
            const treino = plano.treinos[treinoNome];

            planTitleElement.textContent = plano.titulo;
            modalTitleElement.textContent = treinoNome;
            modalExercicios.innerHTML = '';
            
            const today = getTodayDateString();
            const progress = getProgressData();
            const todayProgress = progress[today] && progress[today].treinoNome === treinoNome ? progress[today] : { exercises: {} };

            treino.exercicios.forEach(ex => {
                const isChecked = todayProgress.exercises[ex] === true;
                const li = document.createElement('li');
                if (isChecked) {
                    li.classList.add('completed-exercise');
                }

                if (ex.includes('---')) {
                    li.innerHTML = `<span>${ex}</span>`;
                    li.style.color = 'var(--primary-color)';
                    li.style.fontWeight = 'bold';
                    li.style.justifyContent = 'center';
                    li.style.paddingLeft = '0';
                } else {
                    li.innerHTML = `
                        <input type="checkbox" class="exercise-checkbox" onchange="toggleExercise(this, '${ex}')" ${isChecked ? 'checked' : ''}>
                        <span>${ex}</span>
                        <i class="fas fa-clock exercise-timer-icon" onclick="showTimerPanel()"></i>`;
                }
                modalExercicios.appendChild(li);
            });

            updateFinishWorkoutButton();
            resetTimer(true);
            document.getElementById('timer-panel').style.display = 'none';

            modal.classList.add('visible');
            gsap.fromTo(modal, { opacity: 0 }, { opacity: 1, duration: 0.3, ease: 'power2.inOut' });
            gsap.fromTo(modalContent, { scale: 0.9, opacity: 0 }, { scale: 1, opacity: 1, duration: 0.4, ease: 'power4.out' });
            modalContent.focus();
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            gsap.to(modal, {
                opacity: 0,
                duration: 0.3,
                ease: 'power2.out',
                onComplete: () => {
                    modal.classList.remove('visible');
                }
            });
        }
        
        document.getElementById('modal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('modal')) {
                closeModal();
            }
        });

        function copyTreino() {
            const modalTitle = document.getElementById('modal-title').textContent;
            const planTitle = document.getElementById('plan-title').textContent;
            const modalExercicios = Array.from(document.getElementById('modal-exercicios').querySelectorAll("li > span"))
                .map(span => span.textContent)
                .join('\n');
            const textToCopy = `Plano: ${planTitle}\nTreino: ${modalTitle}\n\n${modalExercicios}`;

            navigator.clipboard.writeText(textToCopy).then(() => {
                const copyBtn = document.querySelector('.copy-btn');
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'Copiado!';
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                }, 2000);
            }).catch(err => {
                console.error('Erro ao copiar o treino:', err);
                alert('Erro ao copiar. Tente manualmente.');
            });
        }
        
        function calcularTMB() {
            const peso = parseFloat(document.getElementById('peso').value);
            const altura = parseFloat(document.getElementById('altura').value);
            const idade = parseInt(document.getElementById('idade').value);
            const sexo = document.getElementById('sexo').value;
            const atividade = document.getElementById('atividade').value;

            if (!peso || !altura || !idade || !sexo || !atividade) {
                alert('Por favor, preencha todos os campos.');
                return;
            }

            let tmb;
            if (sexo === 'masculino') {
                tmb = 88.362 + (13.397 * peso) + (4.799 * altura) - (5.677 * idade);
            } else {
                tmb = 447.593 + (9.247 * peso) + (3.098 * altura) - (4.330 * idade);
            }

            let fatorAtividade;
            switch(atividade) {
                case 'sedentario': fatorAtividade = 1.2; break;
                case 'moderado': fatorAtividade = 1.375; break;
                case 'intenso': fatorAtividade = 1.55; break;
                case 'muito_intenso': fatorAtividade = 1.725; break;
                default: fatorAtividade = 1.2;
            }

            const ndc = tmb * fatorAtividade;

            document.getElementById('tmb-value').textContent = tmb.toFixed(2);
            document.getElementById('ndc-value').textContent = ndc.toFixed(2);

            const tmbResult = document.getElementById('tmb-result');
            tmbResult.style.display = 'block';
            gsap.fromTo(tmbResult, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.6, ease: 'power2.out' });
        }
        
        // --- CHECKBOX & PROGRESS LOGIC ---
        function getTodayDateString() {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function getProgressData() {
            return JSON.parse(localStorage.getItem('gymhubProgress')) || {};
        }

        function saveProgressData(data) {
            localStorage.setItem('gymhubProgress', JSON.stringify(data));
        }

        function toggleExercise(checkbox, exerciseName) {
            const progress = getProgressData();
            const today = getTodayDateString();
            
            if (!progress[today]) {
                progress[today] = {
                    planoId: currentPlanId,
                    treinoNome: currentTreinoNome,
                    completed: false,
                    exercises: {}
                };
            }
            
            progress[today].exercises[exerciseName] = checkbox.checked;
            saveProgressData(progress);
            
            checkbox.parentElement.classList.toggle('completed-exercise', checkbox.checked);
        }

        function finishWorkout() {
            const progress = getProgressData();
            const today = getTodayDateString();
            if (progress[today]) {
                progress[today].completed = true;
                saveProgressData(progress);
                updateFinishWorkoutButton();
            }
        }

        function updateFinishWorkoutButton() {
            const progress = getProgressData();
            const today = getTodayDateString();
            const btn = document.getElementById('finish-workout-btn');
            if (progress[today] && progress[today].completed) {
                btn.textContent = 'Finalizado!';
                btn.classList.add('completed');
                btn.disabled = true;
            } else {
                btn.textContent = 'Finalizar Treino';
                btn.classList.remove('completed');
                btn.disabled = false;
            }
        }

        // --- STATISTICS LOGIC ---
        function renderStatistics() {
            const progress = getProgressData();
            
            // 1. Total Workouts
            const totalWorkouts = Object.values(progress).filter(day => day.completed).length;
            document.getElementById('total-workouts-stat').textContent = totalWorkouts;

            // 2. Current Streak
            let streak = 0;
            const today = new Date();
            for (let i = 0; i < 365; i++) {
                const dateToCheck = new Date(today);
                dateToCheck.setDate(today.getDate() - i);
                const dateString = `${dateToCheck.getFullYear()}-${String(dateToCheck.getMonth() + 1).padStart(2, '0')}-${String(dateToCheck.getDate()).padStart(2, '0')}`;
                if (progress[dateString] && progress[dateString].completed) {
                    streak++;
                } else {
                    break;
                }
            }
            document.getElementById('streak-stat').textContent = `${streak} 🔥`;

            // 3. Workout Frequency Chart
            const frequency = {};
            Object.values(progress).forEach(day => {
                if (day.completed) {
                    const name = day.treinoNome.split('-')[0].trim(); // "Treino A - Peito" -> "Treino A"
                    frequency[name] = (frequency[name] || 0) + 1;
                }
            });

            const chartCtx = document.getElementById('workout-frequency-chart').getContext('2d');
            if(workoutFrequencyChart) {
                workoutFrequencyChart.destroy();
            }
            workoutFrequencyChart = new Chart(chartCtx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(frequency),
                    datasets: [{
                        data: Object.values(frequency),
                        backgroundColor: ['#F5A623', '#FFFFFF', '#999999', '#f0ad4e', '#5bc0de', '#5cb85c'],
                        borderColor: varGet('--bg-color-secondary'),
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: varGet('--text-color-secondary'),
                                font: {
                                    family: "'Roboto Condensed', sans-serif",
                                }
                            }
                        }
                    }
                }
            });

            // 4. Activity Calendar
            renderCalendar(progress);
        }

        function renderCalendar(progress) {
            const calendarEl = document.getElementById('activity-calendar');
            const calendarHeaderEl = document.getElementById('calendar-header');
            calendarEl.innerHTML = '';
            
            const today = new Date();
            const month = today.getMonth();
            const year = today.getFullYear();
            
            const monthName = today.toLocaleString('default', { month: 'long' });
            calendarHeaderEl.innerHTML = `<h3 style="text-align:center; margin-bottom:10px;">${monthName} ${year}</h3>`;

            const firstDayOfMonth = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const dayNames = ['D', 'S', 'T', 'Q', 'Q', 'S', 'S'];

            dayNames.forEach(name => {
                const dayNameEl = document.createElement('div');
                dayNameEl.className = 'day-name';
                dayNameEl.textContent = name;
                calendarEl.appendChild(dayNameEl);
            });

            for (let i = 0; i < firstDayOfMonth; i++) {
                calendarEl.appendChild(document.createElement('div'));
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const dayEl = document.createElement('div');
                dayEl.textContent = day;
                const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                
                if (progress[dateString] && progress[dateString].completed) {
                    dayEl.classList.add('day-completed');
                }
                if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                     dayEl.classList.add('day-today');
                }
                calendarEl.appendChild(dayEl);
            }
        }


        // --- LÓGICA DO CRONÔMETRO ---
        let timerInterval;
        let totalSeconds = 0;
        let currentSeconds = 0;
        let isRunning = false;
        const timerDisplay = document.getElementById('timer-display');
        const startPauseBtn = document.getElementById('timer-start-pause');
        const progressRing = document.getElementById('progress-ring');
        const radius = progressRing.r.baseVal.value;
        const circumference = 2 * Math.PI * radius;
        // const notificationSound = new Audio('./notification.mp3');

        function showTimerPanel() {
             document.getElementById('timer-panel').style.display = 'flex';
        }

        function initTimer() {
            progressRing.style.strokeDasharray = `${circumference} ${circumference}`;
            progressRing.style.strokeDashoffset = circumference;
        }

        function setProgress(percent) {
            const offset = circumference - (percent / 100) * circumference;
            progressRing.style.strokeDashoffset = offset;
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function updateDisplay() {
            timerDisplay.textContent = formatTime(currentSeconds);
            const percent = totalSeconds > 0 ? ((totalSeconds - currentSeconds) / totalSeconds) * 100 : 0;
            setProgress(percent);
        }

        function setTimer(seconds) {
            if (isRunning) return;
            totalSeconds = seconds;
            currentSeconds = seconds;
            updateDisplay();
        }

        function toggleTimer() {
            if (isRunning) {
                clearInterval(timerInterval);
                startPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                isRunning = false;
            } else {
                if (currentSeconds <= 0) return;
                isRunning = true;
                startPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                timerInterval = setInterval(() => {
                    currentSeconds--;
                    updateDisplay();
                    if (currentSeconds <= 0) {
                        clearInterval(timerInterval);
                        startPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                        isRunning = false;
                        // notificationSound.play();
                        setTimeout(() => resetTimer(true), 500);
                    }
                }, 1000);
            }
        }
        
        function resetTimer(silent = false) {
            clearInterval(timerInterval);
            startPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
            isRunning = false;
            currentSeconds = totalSeconds;
            if (silent) {
                totalSeconds = 0;
                currentSeconds = 0;
            }
            updateDisplay();
        }

        // --- ANIMAÇÕES GSAP E FUNÇÕES ADICIONAIS ---
        function initGsapAnims() {
            gsap.registerPlugin(ScrollTrigger);

            gsap.fromTo('.hero-content', { opacity: 0, y: 30 }, { opacity: 1, y: 0, duration: 0.8, ease: 'power4.out' });
            gsap.fromTo('.instagram-button', { opacity: 0, scale: 0 }, { opacity: 1, scale: 1, duration: 0.8, delay: 0.5, ease: 'elastic.out(1, 0.5)' });

            document.querySelectorAll('.plan-section h2, .plan-section .plan-description, .stats-section h2, .stats-section .plan-description').forEach(el => {
                gsap.from(el, {
                    scrollTrigger: { trigger: el, start: 'top 85%', toggleActions: 'play none none none' },
                    opacity: 0, y: 30, duration: 0.8, ease: 'power4.out'
                });
            });

            gsap.utils.toArray('.treino-card, .stat-card').forEach(card => {
                 gsap.from(card, {
                    scrollTrigger: { trigger: card, start: 'top 90%', toggleActions: 'play none none none' },
                    opacity: 0, y: 40, scale: 0.98, duration: 0.6, ease: 'power3.out'
                });
            });
        }
        
        // --- CONTROLE DE TEMA ---
        const themeSwitcher = document.getElementById('theme-switcher');
        const body = document.body;
        const sunIcon = 'fa-sun';
        const moonIcon = 'fa-moon';
        
        const varGet = (name) => getComputedStyle(body).getPropertyValue(name).trim();

        function set_theme(theme) {
            body.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            const icon = theme === 'light' ? moonIcon : sunIcon;
            themeSwitcher.innerHTML = `<i class="fas ${icon}"></i>`;
            if(workoutFrequencyChart) { // Update chart colors on theme change
                renderStatistics();
            }
        }

        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            set_theme(savedTheme);

            themeSwitcher.addEventListener('click', () => {
                const currentTheme = body.getAttribute('data-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                set_theme(newTheme);
            });
        }

        // --- SERVICE WORKER E PROMPT DE INSTALAÇÃO ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => console.log('Service Worker Registrado'))
                    .catch(err => console.log('Falha ao registrar Service Worker:', err));
            });
        }
        
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            const installPrompt = document.getElementById('install-prompt');
            if (installPrompt) {
                 installPrompt.style.display = 'flex';
            }
        });

        function promptInstall() {
            const installPrompt = document.getElementById('install-prompt');
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then(() => {
                    deferredPrompt = null;
                    if(installPrompt) {
                       installPrompt.style.display = 'none';
                    }
                });
            }
        }
    </script>
</body>
</html>